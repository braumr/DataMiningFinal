from sklearn.cluster import KMeans
from sklearn.metrics import silhouette_score

X = christmas_df[feature_cols].values
scores = []

for k in range(2, 7):
    labels = KMeans(n_clusters=k, random_state=42).fit_predict(X)
    scores.append(silhouette_score(X, labels))

plt.plot(range(2, 7), scores, marker='o')
plt.xlabel("Number of Clusters (k)")
plt.ylabel("Silhouette Score")
plt.title("Christmas Silhouette Scores")
plt.show()






from sklearn.decomposition import PCA

pca = PCA(n_components=2)
X_pca = pca.fit_transform(X)

plt.scatter(X_pca[:,0], X_pca[:,1], c=christmas_df['cluster'])
plt.xlabel("PCA Component 1")
plt.ylabel("PCA Component 2")
plt.title("Christmas City Clusters (PCA)")
plt.show()





christmas_centroids = (
    christmas_df
    .groupby('cluster')[feature_cols]
    .mean()
    .reset_index()
)
christmas_centroids





CITY_MEMBERSHIP_CHRISTMAS = (
    christmas_df[['city', 'cluster']]
    .sort_values('cluster')
)
CITY_MEMBERSHIP_CHRISTMAS
